!function l(r,s,o){function d(a,t){if(!s[a]){if(!r[a]){var e="function"==typeof require&&require;if(!t&&e)return e(a,!0);if(p)return p(a,!0);var i=new Error("Cannot find module '"+a+"'");throw i.code="MODULE_NOT_FOUND",i}var n=s[a]={exports:{}};r[a][0].call(n.exports,function(t){return d(r[a][1][t]||t)},n,n.exports,l,r,s,o)}return s[a].exports}for(var p="function"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(t,a,e){"use strict";$(function(){layui.use(["table"],function(){var l=layui.table,r=layui.jquery;l.render({elem:"#compnayList",url:"/manage/listcompany",id:"compnayList",cols:[[{type:"checkbox"},{field:"_id",width:80,title:"",sort:!1,templet:function(t){return t.LAY_INDEX}},{field:"company",width:250,title:"公司"},{field:"alias",width:150,title:"別名",sort:!1},{field:"addr",title:"地址",minWidth:250},{field:"city",width:80,title:"城市",sort:!1},{field:"district",width:90,title:"区域"},{field:"bdStatus",width:92,title:"审核状态",templet:function(t){return t.bdStatus&&99==t.bdStatus?'<span class="layui-badge-rim" style="padding: 1px 5px 20px;">手动审核</span>':t.bdStatus&&77==t.bdStatus?'<span class="layui-badge-rim" style="padding: 1px 5px 20px;">回收站</span>':t.bdStatus&&3==t.bdStatus?'<span class="layui-badge-rim" style="padding: 1px 5px 20px;">地图识别</span>':t.bdStatus&&2==t.bdStatus?'<span class="layui-badge-rim" style="padding: 1px 5px 20px;">库识别</span>':t.bdStatus&&1==t.bdStatus?'<span class="layui-badge-rim" style="padding: 1px 5px 20px;">自动识别</span>':(t.bdStatus,'<span class="layui-badge-rim" style="padding: 1px 5px 20px;">未识别</span>')}},{fixed:"right",width:120,align:"center",toolbar:"#barCompany"}]],page:!0}),l.on("tool(company)",function(t){var e=t.data,a=t.event;if("detail"===a)layer.msg("查看暂不支持");else if("del"===a)layer.confirm("删除数据："+(e.alias||e.company)+"？",function(t){var a=layer.load(2);r.ajax({url:"/manage/deleteCompanyById",type:"post",data:{_id:e._id}}).done(function(t){if(layer.close(a),!!t&!!t.n&&0<t.n){layer.msg("删除成功！");try{layui.table.reload("compnayList")}catch(t){}}else layer.msg("删除失败，原因：未匹配的记录");r("#commitData").removeAttr("disabled")}).fail(function(t){layer.close(a),console.error(t),layer.msg("删除失败"),r("#commitData").removeAttr("disabled")})});else if("edit"===a)layer.msg("编辑操作");else if("position"===a){var i=layer.open({type:2,title:e.company+"-位置",maxmin:!1,offset:"100px",area:[r(window).width()+"px",r(window).height()+"px"],content:"/manage/pagecompanyposition?_id="+e._id});layer.full(i)}});var a={setDelStatus:function(){var t=l.checkStatus("compnayList"),a=t.data;if(!a||a.length<=0)layer.alert("请选择至少一条记录");else if(!s){s=!0;for(var e=a[0]._id,i=1;i<a.length;i++)e+=","+a[i]._id;var n=layer.load(2);r.ajax({url:"/manage/updateCompanyStatus",type:"post",data:{_ids:e,bdStatus:77}}).done(function(t){if(layer.close(n),!!t&!!t.n&&0<t.n){layer.msg("数据已提交");try{l.reload("compnayList")}catch(t){}}else layer.msg("提交数据执行失败，原因：未匹配的记录");s=!1}).fail(function(t){layer.close(n),console.error(t),layer.msg("操作失败"),s=!1})}}};r(".layui-form .layui-btn").on("click",function(){var t=r(this).data("type");a[t]&&a[t].call(this)})}),$("#searchBtn").on("click",function(){var t=$("select[name=positionStatus]").val();layui.table.reload("compnayList",{where:{positionConfirm:t},page:{curr:1}})})});var s=!1},{}]},{},[1]);